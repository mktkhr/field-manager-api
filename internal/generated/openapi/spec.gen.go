// Package openapi provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package openapi

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
