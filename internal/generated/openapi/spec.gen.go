// Package openapi provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package openapi

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
