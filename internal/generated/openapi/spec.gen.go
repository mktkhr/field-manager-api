// Package openapi provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package openapi

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"ZcUevHS2truMykjl/wEAAP//Wo+zmwQuAAA=",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
